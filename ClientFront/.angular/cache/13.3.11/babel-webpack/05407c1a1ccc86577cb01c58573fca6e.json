{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { MatSnackBarConfig } from '@angular/material/snack-bar';\nimport { forkJoin } from 'rxjs';\nimport { first, map } from 'rxjs/operators';\nimport { Constants } from 'src/app/shared/constants/constants';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"@ngx-translate/core\";\nimport * as i4 from \"src/app/shared/services/user.service\";\nimport * as i5 from \"src/app/shared/services/auth.service\";\nimport * as i6 from \"src/app/shared/services/project.service\";\nimport * as i7 from \"src/app/shared/services/category.service\";\nimport * as i8 from \"@angular/common/http\";\nimport * as i9 from \"@angular/material/form-field\";\nimport * as i10 from \"@angular/material/input\";\nimport * as i11 from \"@angular/forms\";\nimport * as i12 from \"@angular/material/select\";\nimport * as i13 from \"@angular/common\";\nimport * as i14 from \"@angular/material/core\";\nimport * as i15 from \"@angular/material/button\";\nimport * as i16 from \"@angular/material/card\";\nimport * as i17 from \"@angular/material/icon\";\nimport * as i18 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i19 from \"@angular/material/chips\";\nfunction ServiceTechnicianSelectComponent_mat_option_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const o_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", o_r4.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(o_r4.name);\n  }\n}\nfunction ServiceTechnicianSelectComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.searchFeedback);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    selected: a0\n  };\n};\nfunction ServiceTechnicianSelectComponent_div_23_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"mat-card\", 19)(2, \"mat-card-header\")(3, \"div\", 20)(4, \"mat-icon\", 21);\n    i0.ɵɵtext(5, \"perm_identity\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"mat-card-title\", 22);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"mat-card-subtitle\");\n    i0.ɵɵtext(9, \"Rating: \");\n    i0.ɵɵelement(10, \"ngb-rating\", 23);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"mat-card-content\")(13, \"div\", 24)(14, \"div\", 25)(15, \"p\", 26);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"p\", 27);\n    i0.ɵɵtext(18);\n    i0.ɵɵpipe(19, \"currency\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"mat-chip-list\", 28)(21, \"mat-chip\", 29);\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"mat-chip\", 29);\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"mat-chip\", 29);\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(27, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function ServiceTechnicianSelectComponent_div_23_div_1_Template_button_click_27_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const pro_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.techSelectDetails(pro_r6);\n    });\n    i0.ɵɵtext(28);\n    i0.ɵɵpipe(29, \"translate\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const pro_r6 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(pro_r6.company);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"max\", 5)(\"rate\", pro_r6.ratingSum / pro_r6.ratingCount)(\"readonly\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" (\", pro_r6.rating, \")\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(pro_r6.bio);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(19, 13, pro_r6.unitPrice), \" per \", pro_r6.unitType, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(pro_r6.skills[0]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pro_r6.skills[1]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pro_r6.skills[2]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(17, _c0, ctx_r5.selectedTechID === pro_r6._id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(29, 15, \"Label.TechnicianDetails\"), \" \");\n  }\n}\nfunction ServiceTechnicianSelectComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtemplate(1, ServiceTechnicianSelectComponent_div_23_div_1_Template, 30, 19, \"div\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.filteredProfessionals);\n  }\n}\nfunction ServiceTechnicianSelectComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 31)(1, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ServiceTechnicianSelectComponent_div_24_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.showMore();\n    });\n    i0.ɵɵtext(2, \"Show More\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let ServiceTechnicianSelectComponent = /*#__PURE__*/(() => {\n  class ServiceTechnicianSelectComponent {\n    constructor(route, router, snackBar, translateService, userService, authService, projectService, categoryService, changeDetectorRef, http) {\n      this.route = route;\n      this.router = router;\n      this.snackBar = snackBar;\n      this.translateService = translateService;\n      this.userService = userService;\n      this.authService = authService;\n      this.projectService = projectService;\n      this.categoryService = categoryService;\n      this.changeDetectorRef = changeDetectorRef;\n      this.http = http;\n      this.range = 10;\n      this.selectedOption = '10';\n      this.isFeedbackVisible = false;\n      this.isShowMoreBtnVisible = false;\n      this.isCardListVisible = false;\n      // geolocation variables\n      this.latitude = 0;\n      this.longitude = 0;\n      // public canadaPostalCodeRegex: RegExp = new RegExp('^[ABCEGHJ-NPRSTVXY][0-9][ABCEGHJ-NPRSTV-Z][ -]?[0-9]??[ABCEGHJ-NPRSTV-Z]??[0-9]??$', 'im');\n      //  public usZipCodeRegex: RegExp = new RegExp('^[0-9]{5}(?:[ -][0-9]{4})?$', 'im');\n      this.googleMapApiUrl = 'https://maps.googleapis.com/maps/api/geocode/json';\n      this.googleMapApiKey = 'AIzaSyDS_bEoW2tmdRW-WyWaZIS_gnsbWQ1stUU';\n      //Options for selecting range for techie location.\n      this.options = [{\n        name: \"10\",\n        value: 10\n      }, {\n        name: \"20\",\n        value: 20\n      }, {\n        name: \"50\",\n        value: 50\n      }, {\n        name: \"100\",\n        value: 100\n      }, {\n        name: \"All\",\n        value: 9999999\n      }];\n      this.route.queryParams.subscribe(params => {\n        this.categorySelection = params.category;\n        this.serviceSelection = params.service;\n      });\n    }\n    //check for change in selected range (km).\n    onOptionsSelected() {\n      if (this.selectedOption == \"All\") {\n        this.range = 9999999;\n      } else {\n        this.range = parseInt(this.selectedOption);\n      }\n    }\n    ngOnInit() {\n      // Autodetect the current position and provide the first 3 digits of postal code.\n      this.getAreaCode();\n    }\n    /**\n     * Get the selected techie and create project listing.\n     */\n    techSelect(id) {\n      this.selectedTechID = id;\n      this.createProject();\n    }\n    techSelectDetails(pro) {\n      var _a, _b, _c;\n      this.selectedTechID = pro._id;\n      const categoryId = (_a = this.categories.find(c => c.name === this.categorySelection)) === null || _a === void 0 ? void 0 : _a._id;\n      const serviceId = (_c = (_b = this.categories.find(c => c._id === categoryId)) === null || _b === void 0 ? void 0 : _b.services.find(s => s.name === this.serviceSelection)) === null || _c === void 0 ? void 0 : _c._id;\n      const serviceName = this.serviceSelection;\n      