{"ast":null,"code":"import { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/form-field\";\nimport * as i5 from \"@angular/material/input\";\nimport * as i6 from \"@angular/material/button\";\nfunction ProjectReviewDialogComponent__svg_svg_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 9);\n    i0.ɵɵlistener(\"mouseover\", function ProjectReviewDialogComponent__svg_svg_4_Template__svg_svg_mouseover_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const star_r1 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.hoveredOver(star_r1);\n    })(\"mouseleave\", function ProjectReviewDialogComponent__svg_svg_4_Template__svg_svg_mouseleave_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.hoveredLeave();\n    })(\"click\", function ProjectReviewDialogComponent__svg_svg_4_Template__svg_svg_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const star_r1 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.onRate(star_r1);\n    });\n    i0.ɵɵelement(1, \"polygon\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const star_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"selected\", star_r1 <= ctx_r0.hoverState || star_r1 <= ctx_r0.reviewForm.value.rating);\n  }\n}\nconst _c0 = function () {\n  return [1, 2, 3, 4, 5];\n};\nexport let ProjectReviewDialogComponent = /*#__PURE__*/(() => {\n  class ProjectReviewDialogComponent {\n    constructor(dialogRef, data) {\n      this.dialogRef = dialogRef;\n      this.data = data;\n      this.hoverState = 0; // Set the initial star rating to 0\n      this.clickedState = 0;\n    }\n    ngOnInit() {\n      this.projectID = this.data.projectID;\n      this.reviewForm = new FormGroup({\n        review: new FormControl('', Validators.required),\n        rating: new FormControl(0, [Validators.required, Validators.min(1), Validators.max(5)]),\n        projectID: new FormControl(this.projectID, Validators.required)\n      });\n    }\n    onRate(rating) {\n      this.reviewForm.controls['rating'].setValue(rating);\n    }\n    hoveredOver(rate) {\n      this.hoverState = rate;\n    }\n    hoveredLeave() {\n      this.hoverState = 0;\n    }\n    onSubmit() {\n      if (this.reviewForm.valid) {\n        const data = this.reviewForm.value;\n        console.log(data);\n        const url = 'http://localhost:3333/auth/reviews';\n        fetch(url, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(data)\n        }).then(response => {\n          if (!response.ok) {\n            throw new Error('Network response was not ok');\n          }\n          return response.json();\n        }).then(data => {\n          console.log('Response: ', data);\n          this.dialogRef.close(this.reviewForm.value);\n        }).catch(error => {\n          console.error('API Error: ', error);\n        });\n      }\n    }\n    onCancel() {\n      this.dialogRef.close();\n    }\n  }\n  ProjectReviewDialogComponent.ɵfac = function ProjectReviewDialogComponent_Factory(t) {\n    return new (t || ProjectReviewDialogComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA));\n  };\n  ProjectReviewDialogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProjectReviewDialogComponent,\n    selectors: [[\"app-project-review-dialog\"]],\n    decls: 14,\n    vars: 3,\n    consts: [[\"mat-dialog-title\", \"\"], [3, \"formGroup\"], [1, \"rating\"], [\"class\", \"star\", \"viewBox\", \"0 0 53.867 53.867\", 3, \"selected\", \"mouseover\", \"mouseleave\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"textInput\", \"appearance\", \"fill\"], [\"matInput\", \"\", \"formControlName\", \"review\"], [\"align\", \"end\"], [\"mat-button\", \"\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"viewBox\", \"0 0 53.867 53.867\", 1, \"star\", 3, \"mouseover\", \"mouseleave\", \"click\"], [\"points\", \"26.934,1.318 35.256,18.182 53.867,20.887 40.4,34.013 43.579,52.549 26.934,43.798 10.288,52.549 13.467,34.013 0,20.887 18.611,18.182\"]],\n    template: function ProjectReviewDialogComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h2\", 0);\n        i0.ɵɵtext(1, \"Review Your Experience\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"mat-dialog-content\", 1)(3, \"div\", 2);\n        i0.ɵɵtemplate(4, ProjectReviewDialogComponent__svg_svg_4_Template, 2, 2, \"svg\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"mat-form-field\", 4)(6, \"mat-label\");\n        i0.ɵɵtext(7, \"Comment\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"textarea\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"mat-dialog-actions\", 6)(10, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function ProjectReviewDialogComponent_Template_button_click_10_listener() {\n          return ctx.onCancel();\n        });\n        i0.ɵɵtext(11, \"Cancel\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function ProjectReviewDialogComponent_Template_button_click_12_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵtext(13, \"Submit\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.reviewForm);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(2, _c0));\n      }\n    },\n    directives: [i1.MatDialogTitle, i1.MatDialogContent, i2.NgControlStatusGroup, i2.FormGroupDirective, i3.NgForOf, i4.MatFormField, i4.MatLabel, i5.MatInput, i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlName, i1.MatDialogActions, i6.MatButton],\n    styles: [\"ngb-rating[_ngcontent-%COMP%]{color:#e7e73a;font-size:50px;margin-top:10px}.rating[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{width:5%;height:5%;cursor:pointer;fill:#fff;stroke:#000;transition:transform .2s}.rating[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]:hover, .rating[_ngcontent-%COMP%]   .star.selected[_ngcontent-%COMP%]{fill:#fbbf24;stroke:none;transform:scale(1.1)}#textInput[_ngcontent-%COMP%]{width:50%}\"]\n  });\n  return ProjectReviewDialogComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}