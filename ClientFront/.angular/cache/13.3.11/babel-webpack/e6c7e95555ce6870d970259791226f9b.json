{"ast":null,"code":"import { FormControl, FormGroup } from '@angular/forms';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { Subject } from 'rxjs';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { UserType } from 'src/app/shared/enums/user-type.enum';\nimport { Project } from 'src/app/shared/models/project';\nimport { User } from 'src/app/shared/models/user';\nimport { ProjectCompleteDialogComponent } from './project-complete-dialog/project-complete-dialog.component';\nimport { ProjectPayDialogComponent } from './project-pay-dialog/project-pay-dialog.component';\nimport { ProjectReviewDialogComponent } from './project-review-dialog/project-review-dialog.component';\nimport { ProjectStartDialogComponent } from './project-start-dialog/project-start-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"src/app/shared/services/auth.service\";\nimport * as i4 from \"src/app/shared/services/project.service\";\nimport * as i5 from \"@angular/material/tabs\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/button\";\nimport * as i8 from \"@angular/forms\";\nimport * as i9 from \"@ngx-translate/core\";\nconst _c0 = [\"chatRoom\"];\nfunction ProjectComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"hr\");\n    i0.ɵɵelementStart(2, \"h2\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h3\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"h3\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"h3\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function ProjectComponent_div_30_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.openReviewDialog();\n    });\n    i0.ɵɵtext(15, \"Complete Job\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 8, \"Label.YourTechie\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate3(\" \", i0.ɵɵpipeBind1(7, 10, \"Dictionary.Name\"), \": \", ctx_r0.project.professional.firstName, \" \", ctx_r0.project.professional.lastName, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(10, 12, \"Dictionary.Company\"), \": \", ctx_r0.project.professional.company, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(13, 14, \"Dictionary.Email\"), \": \", ctx_r0.project.professional.email, \" \");\n  }\n}\nfunction ProjectComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"hr\");\n    i0.ɵɵelementStart(2, \"h2\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h3\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"h3\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"h3\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 8, \"Label.YourCustomer\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate3(\" \", i0.ɵɵpipeBind1(7, 10, \"Dictionary.Name\"), \": \", ctx_r1.project.client.firstName, \" \", ctx_r1.project.client.lastName, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(10, 12, \"Dictionary.Company\"), \": \", ctx_r1.project.client.company, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(13, 14, \"Dictionary.Email\"), \": \", ctx_r1.project.client.email, \" \");\n  }\n}\nfunction ProjectComponent_button_32_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function ProjectComponent_button_32_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.onReviewProject();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"Label.ReviewService\"), \" \");\n  }\n}\nfunction ProjectComponent_button_33_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function ProjectComponent_button_33_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.onStartProject();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"Message.StartProject\"), \" \");\n  }\n}\nfunction ProjectComponent_button_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function ProjectComponent_button_34_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return ctx_r17.onProjectOnGoing();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"Message.MarkProjectOngoing\"), \" \");\n  }\n}\nfunction ProjectComponent_button_35_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function ProjectComponent_button_35_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return ctx_r19.onCompleteProject();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"Message.MarkComplete\"), \" \");\n  }\n}\nfunction ProjectComponent_button_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function ProjectComponent_button_36_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return ctx_r21.onPayProject();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"Message.MarkProjectPaid\"), \" \");\n  }\n}\nfunction ProjectComponent_mat_tab_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-tab\", 3);\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelementStart(2, \"div\", 4)(3, \"h1\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h3\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"h3\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"h3\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"h3\");\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"translate\");\n    i0.ɵɵpipe(17, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"h3\");\n    i0.ɵɵtext(19);\n    i0.ɵɵpipe(20, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"label\", i0.ɵɵpipeBind1(1, 16, \"Dictionary.TechInfo\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate3(\" \", ctx_r7.project.professional.firstName, \" \", ctx_r7.project.professional.lastName, \" | \", ctx_r7.project.professional.company, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(7, 18, \"Dictionary.Email\"), \": \", ctx_r7.project.professional.email, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate3(\" \", i0.ɵɵpipeBind1(10, 20, \"Dictionary.Address\"), \": \", ctx_r7.project.professional.address == null ? null : ctx_r7.project.professional.address.street, \", \", ctx_r7.project.professional.address == null ? null : ctx_r7.project.professional.address.city, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(13, 22, \"Dictionary.Phone\"), \": \", ctx_r7.project.professional.phoneNumber, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate3(\" \", i0.ɵɵpipeBind1(16, 24, \"Dictionary.Rate\"), \": \", i0.ɵɵpipeBind1(17, 26, ctx_r7.project.professional.unitPrice), \" per \", ctx_r7.project.professional.unitType, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(20, 28, \"Dictionary.Skills\"), \": \", ctx_r7.proSkills, \" \");\n  }\n}\nfunction ProjectComponent_mat_tab_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-tab\", 3);\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelementStart(2, \"div\", 4)(3, \"h1\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h3\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"h3\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"h3\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"label\", i0.ɵɵpipeBind1(1, 11, \"Label.ClientInfo\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate3(\" \", ctx_r8.project.client.firstName, \" \", ctx_r8.project.client.lastName, \" | \", ctx_r8.project.client.company, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(7, 13, \"Dictionary.Email\"), \": \", ctx_r8.project.client.email, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate3(\" \", i0.ɵɵpipeBind1(10, 15, \"Dictionary.Address\"), \": \", ctx_r8.project.client.address == null ? null : ctx_r8.project.client.address.street, \", \", ctx_r8.project.client.address == null ? null : ctx_r8.project.client.address.city, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(13, 17, \"Dictionary.Phone\"), \": \", ctx_r8.project.client.phoneNumber, \" \");\n  }\n}\nfunction ProjectComponent_div_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\", 25);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 26);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"br\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const message_r23 = ctx.$implicit;\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", message_r23.text, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", message_r23.authorId == (ctx_r10.user == null ? null : ctx_r10.user._id) ? \"Me\" : message_r23.authorName, \" | \", i0.ɵɵpipeBind2(5, 3, message_r23.createdAt, \"medium\"), \" \");\n  }\n}\nexport let ProjectComponent = /*#__PURE__*/(() => {\n  class ProjectComponent {\n    constructor(route, router, dialog, authService, projectService, changeDetectorRef) {\n      this.route = route;\n      this.router = router;\n      this.dialog = dialog;\n      this.authService = authService;\n      this.projectService = projectService;\n      this.changeDetectorRef = changeDetectorRef;\n      this.isCustomer = true;\n      // project = {\n      //     state: 'Requested', // Requested, Accepted, Completed\n      //     serviceCategory: 'Hardware',\n      //     serviceSubCategory: 'Personal computers (PCs) repair',\n      //     dateCreated: new Date('2021-05-12T07:58:54.299+00:00'),\n      //     dateCompleted: undefined,\n      //     techID: 124,\n      //     techName: 'Generic Company',\n      //     customerID: 125,\n      //     customerName: 'Generic Customer',\n      //     billingCost: '$50',\n      //     billingType: 'hourly',\n      //     billingStatus: 'Pending',\n      //     messages: [\n      //         { senderID: 100, message: 'Hello' },\n      //         { senderID: 124, message: 'Whaddup' },\n      //         { senderID: 100, message: 'I need help.' },\n      //         { senderID: 124, message: 'Ok sure.' },\n      //     ],\n      // };\n      this.message = '';\n      this.destroyed = new Subject();\n      const blankUser = new User();\n      this.project = new Project();\n      this.project.client = blankUser;\n      this.project.professional = blankUser;\n      this.projectId = this.route.snapshot.params.id;\n      this.authService.getUserInfo().subscribe({\n        next: user => {\n          this.isCustomer = (user === null || user === void 0 ? void 0 : user.userType) === UserType.Client;\n          this.user = user;\n        }\n      });\n      /*\n      this.authService.user.subscribe((u: User | null) => {\n          this.isCustomer = u?.userType === UserType.Client;\n          this.user = u;\n      });\n      */\n      this.messageInput = new FormControl(null);\n      this.formGroup = new FormGroup({\n        messageInput: this.messageInput\n      });\n    }\n    ngOnInit() {\n      if (this.projectId) {\n        // Get project details from db.\n        this.projectService.get(this.projectId).pipe(takeUntil(this.destroyed)).subscribe(project => {\n          this.project = project;\n          this.proSkills = project.professional.skills.join(', ');\n          if (this.project.totalCost) {\n            this.projectPrice = \"$\" + this.project.totalCost;\n          } else {\n            this.projectPrice = \"$0\";\n          }\n          